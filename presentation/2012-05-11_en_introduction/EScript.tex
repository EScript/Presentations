\documentclass[ucs,9pt]{beamer}

% Set input encoding to UTF-8.
\usepackage[utf8x]{inputenc}

% Set language.
\usepackage[english]{babel}

\usepackage{microtype}
\usepackage{listings}

\title{EScript}
\subtitle{Short Presentation of a Scripting Language}
\author{Benjamin~Eikel}
\date{May 11, 2012}

\newcommand{\HNIphone}{+49 5251 60-6452}
\newcommand{\HNIfax}{+49 5251 60-6482}
\newcommand{\HNIemail}{eikel@upb.de}
\newcommand{\HNIweb}{http://wwwhni.upb.de/en/alg/}
\newcommand{\HNIaffiliation}{Benjamin Eikel holds a scholarship of the \href{http://pace.uni-paderborn.de/en/phd-programs/igs}{\includegraphics[width=.9\linewidth]{logo_igs}}}

% Activate the Heinz Nixdorf Institute theme.
\usepackage{HNI/beamerthemeHNI}

\AtBeginSection[] {
\begin{frame}{Overview}
	\tableofcontents[currentsection]
\end{frame}
}

\begin{document}
\lstdefinelanguage{EScript}{
	morekeywords={var,new,fn,this,true,false,void,if,else,while,for,foreach,as,thisFn,break,continue,return},
	morekeywords=[2]{out,ExtObject,Type,Number},
	sensitive=true,
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/},
	morestring=[b]{"},
	morestring=[d]{â€™}
}
\lstset{
	language=EScript,
	showstringspaces=false,
	tabsize=4,
	basicstyle=\ttfamily,
	keywordstyle=[2]\color{blue}
}
\maketitle

\begin{frame}{Overview}
\tableofcontents
\end{frame}

\section{Introduction}
\begin{frame}{What is EScript?}
EScript $\ldots$ \\[1em]
\begin{itemize}
	\addtolength{\itemsep}{\baselineskip}
	\item is an object-oriented scripting language.
	\item is internally compiled and executed by a virtual machine.
	\item has a similar syntax to C.
	\item was developed to use C++ objects from scripts easily.
	\item is released under a free software license.
	\item is available from \url{http://escript.berlios.de/}.
\end{itemize}
\end{frame}

\begin{frame}[fragile]{First Example}
\begin{itemize}
	\addtolength{\itemsep}{\baselineskip}
	\item EScript files should have the extension \texttt{.escript}.
	\item The EScript parser analyzes the script file line by line.
	\item A simple script:
			\begin{lstlisting}
				out("Hello, world!\n");
			\end{lstlisting}
\end{itemize}
\end{frame}

\section{Data Types}
\begin{frame}[fragile]{Simple Types}
	\begin{block}{Number}
		\hfill \lstinline!1! \hfill \lstinline!27.4! \hfill \lstinline!0x1a! \hfill \lstinline!25 / 5! \hfill \lstinline!3 + 4! \hfill{}
	\end{block}
	\begin{block}{String}
		\hfill \lstinline!"an"! \hfill \lstinline!'example'! \hfill \lstinline!"hello" + ', ' + "world"! \hfill{}
	\end{block}
	\begin{block}{Bool}
		\hfill \lstinline!true! \hfill \lstinline!false! \hfill{}
	\end{block}
	\begin{block}{Void}
		\hfill \lstinline!void! \hfill{}
	\end{block}
\end{frame}

\begin{frame}[fragile]{Variables, Comments}
	\begin{block}{var}
		\begin{lstlisting}
			/*
			   Declaring a variable is done using the keyword
			   "var", an identifier, an equation sign, and an
			   expression on the right side. The type of the
			   variable is deduced from the expression on the
			   right side.
			 */
			var xPos = 500 - 80 / 2;

			// The variable "message" will be of type String
			var message = "Please click the button";

			// Dynamically change the type to Number
			message = 5;
		\end{lstlisting}
	\end{block}
\end{frame}

\begin{frame}[fragile]{Functions}
	\begin{block}{fn}
		\begin{lstlisting}
			var square = fn(num) {
			    return num * num;
			};
			var a = square(5);
			var b = square(4.2);
		\end{lstlisting}
	\end{block}
\end{frame}

\begin{frame}[fragile]{Advanced Types (1)}
	\begin{block}{Array}
		\begin{lstlisting}
			var numbers = [3, 23, 7, 3, 100, 1, 35];
			var colors = ["red", "green", "blue"];
		\end{lstlisting}
	\end{block}
	\begin{block}{Map}
		\begin{lstlisting}
			var fruits = {
			    "lemon" : "yellow",
			    "cherry" : "red"
			};
			fruits["apple"] = "green";
		\end{lstlisting}
	\end{block}
\end{frame}

\begin{frame}[fragile]{Advanced Types (2)}
	\begin{block}{ExtObject}
		\begin{lstlisting}
			var car = new ExtObject();
			car.color := "red";
			car.speed := 190;
			car.outputDesc := fn() {
			    out("This is a ", this.color, " car ");
			    out("with top speed ", this.speed, ".\n");
			};

			...

			car.speed = 185;
			car.outputDesc();
		\end{lstlisting}
	\end{block}
	Output: This is a red car with top speed 185.
\end{frame}

\begin{frame}[fragile]{Advanced Types (3)}
	\begin{block}{Type}
		\begin{lstlisting}
			var Shape = new Type();
			Shape.color := "white";

			// New type that is derived from Shape
			var Polygon = new Type(Shape); 
			Polygon.numVertices := 3;

			// New type that is derived from Shape
			var Circle = new Type(Shape); 
			Circle.radius := 0;

			var circle = new Circle();
			circle.color = "red";
			circle.radius = 5;
		\end{lstlisting}
	\end{block}
\end{frame}
 
\section{Control Structures}
\begin{frame}[fragile]{Conditionals (1)}
	\begin{block}{if}
		\begin{lstlisting}
			var result = /* some function */;
			if(result) {
			    out("Success");
			} else {
			    out("Failure");
			}
		\end{lstlisting}
		\begin{lstlisting}
			var num = /* some number */;
			if(num < 0) {
			    out("Too small");
			} else if(num >= 0 && num <= 100) {
			    out("Range okay");
			} else {
			    out("Too large");
			}
		\end{lstlisting}
	\end{block}
\end{frame}

\begin{frame}[fragile]{Conditionals (2)}
	\begin{block}{? (conditional operator)}
		\begin{lstlisting}
			var num = /* some number */;
			var positive = (num > 0) ? true : false;
		\end{lstlisting}
	\end{block}
	\pause
	\vfill
	\emph{Note:} There is no \lstinline!switch! in EScript.
\end{frame}

\begin{frame}[fragile]{Loops (1)}
	\begin{block}{while}
		\begin{lstlisting}
			var tasks = [/* some tasks */];
			while(!tasks.empty()) {
			    var firstTask = tasks.front();
			    tasks.popFront();
			    // do something with first task
			}
		\end{lstlisting}
	\end{block}
\end{frame}

\begin{frame}[fragile]{Loops (2)}
	\begin{block}{for}
		\begin{lstlisting}
			var sum = 0;
			for(var i = 0; i < 100; ++i) {
			    sum += i;
			}
			out("Sum of numbers: ", sum, "\n");
		\end{lstlisting}
	\end{block}
\end{frame}

\begin{frame}[fragile]{Loops (3)}
	\begin{block}{foreach}
		\begin{lstlisting}
			var chars = ["a", "c", "k", "b", "d", "x", "j"];
			foreach(chars as var c) {
			    if(c == "x") {
			        out("Character \"x\" found.");
			        break;
			    }
			}
		\end{lstlisting}
	\end{block}
\end{frame}

\section{Other Features}
\begin{frame}[fragile]{Delegation}
	Call a function on another object.
	\begin{block}{Example}
		\lstinputlisting{Delegation.escript}
	\end{block}
\end{frame}

\begin{frame}[fragile]{Properties}
	\begin{block}{Example}
		\lstinputlisting{Properties.escript}
	\end{block}
\end{frame}

\section{Examples}
\begin{frame}[fragile]{Factorial}
	Factorial: $\qquad n! = 1 \cdot 2 \cdot 3 \cdot \ldots \cdot n \qquad 0! = 1$
	\begin{block}{Implementation}
		\begin{lstlisting}
			var factorialRecursive = fn(Number n) {
			    if(n == 0) {
			        return 1;
			    }
			    return thisFn(n - 1) * n;
			};
			var factorialIterative = fn(Number n) {
			    var product = 1;
			    for(var i = 2; i <= n; ++i) {
			        product *= i;
			    }
			    return product;
			};
		\end{lstlisting}
	\end{block}
\end{frame}

\begin{frame}[fragile]{Player}
	\begin{block}{Implementation}
		\begin{lstlisting}
			var Player = new Type();
			Player.x := 0;
			Player.y := 0;
			var movePlayer = fn(player, Number dx, Number dy) {
			    player.x += dx;
			    player.y += dy;
			};
			var printPos = fn(player) {
			    out("Player position: (", player.x);
			    out(", ", player.y, ")\n");
			};

			var playerA = new Player();
			movePlayer(playerA, 5, 7);
			printPos(playerA);
		\end{lstlisting}
	\end{block}
\end{frame}

\HNIlastframe

\end{document}